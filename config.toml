# NixOS Configuration
# Single source of truth for all deployments

[metadata]
repository = "https://github.com/guemidiborhane/nixos-config"
stateVersion = "25.11"

[user]
username = "borhane"
fullName = "Borhaneddine GUEMIDI"
email = "guemidiborhane@gmail.com"
shell = "fish"
sshKeys = [
  "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIBf7j2Y+EiXT2hmQGljnfUIWLeOOiZ9INuyQWZHwuenN personal",
]
yadmRepo = "https://github.com/guemidiborhane/dotfiles.git"

# Default features for all hosts (can be overridden per-host)
[defaults.features]
bluetooth = true
wifi = true
touchpad = false
backlight = false
fingerprint = false
autoUpdate = false
autoReboot = false
zramSwap = true
wol = false
remoteUnlock = false

# Default power settings for laptops (can be overridden per-host)
[defaults.power]
tlp = true
startChargeThreshold = 65
stopChargeThreshold = 85

[hosts.takotsubo]
hostname = "tako"
type = "laptop"                    # laptop, desktop, headless, server
disk = "/dev/sda"
ram = 16
cpu = "intel"                      # intel, amd
gpu = "intel"                      # intel, amd, nvidia, hybrid
hardware = "dell-latitude-7490"    # Optional: nixos-hardware module path
description = "Dell Latitude 7490"

[hosts.takotsubo.features]
touchpad = true
backlight = true

[hosts.kamui]
type = "laptop"
disk = "/dev/nvme0n1"
ram = 32
cpu = "amd"
gpu = "amd"
description = "P14s G5 AMD"
hardware = "lenovo-thinkpad-p14s-amd-gen5"

[hosts.kamui.features]
bluetooth = true
wifi = true
touchpad = true
backlight = true
fingerprint = true
kernel = "cachyos-latest-x86_64-v4"

[hosts.kamui.power]
tlp = true
startChargeThreshold = 65
stopChargeThreshold = 85

[hosts.kotoamatsukami]
hostname = "koto"
type = "desktop"
disk = "/dev/nvme0n1"
ram = 64
cpu = "amd"
gpu = "nvidia"
description = "5950X Workstation"

[hosts.kotoamatsukami.features]
bluetooth = true
wifi = true
kernel = "cachyos-latest-x86_64-v3"
autoUpdate = true
wol = "enp6s0"
remoteUnlock = true

[hosts.kotoamatsukami.disks]
"34B1213A561574D4" = "/mnt/2_5"
"75cddeb8-910a-41da-8b8c-269dada60016" = "/mnt/3_5"
"4d80e49e-7786-4543-aa34-7429908d3c8b" = "/mnt/320"
"afe8ba39-fada-43da-ba0a-459498b1b062" = "/run/media/borhane/LACIE"
"4A9DD7D4448B0F0A" = "/run/media/borhane/DATA"
